<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TOKONTANY BE MALAGASY</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/style.css">
  
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

  <style>
    #follow-btn {
      transition: all 0.3s ease;
    }
    #follow-btn:hover {
      background-color: #ffc107;
      box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
      transform: scale(1.05);
    }
    #follower-count {
      background-color: #ffc107;
      color: #212529;
      padding: 2px 6px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 0.85rem;
      margin-left: 0.5rem;
    }
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm animate__animated animate__fadeInDown">
    <div class="container">
      <a class="navbar-brand" href="index.html">TOKONTANY BE MALAGASY</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav"> 
        <ul class="navbar-nav align-items-center">
          <li class="nav-item"><a class="nav-link" href="index.html">Accueil</a></li>
          <li class="nav-item"><a class="nav-link active" href="about.html">√Ä propos</a></li>
          <li class="nav-item"><a class="nav-link" href="activities.html">Activit√©s</a></li>
          <li class="nav-item"><a class="nav-link" href="programs.html">Programmes</a></li>
          <li class="nav-item"><a class="nav-link" href="organizations.html">Organisations</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
          <li class="nav-item ms-3 d-flex align-items-center">
            <span id="follower-count">0 abonn√©s</span>
          </li>
        </ul>
      </div>
    </div>
  </nav>

    <!-- Hero Section Modernis√© -->
    <header class="hero-gradient d-flex align-items-center">
        <!-- Bulles anim√©es -->
        <ul class="bubbles">
          <li></li><li></li><li></li><li></li><li></li>
          <li></li><li></li><li></li><li></li><li></li>
        </ul>
        <div class="container text-center text-white">
          <h1 class="display-2 fw-bold animate__animated animate__fadeInDown">TOKONTANY BE MALAGASY</h1>
          <p class="lead mt-3 animate__animated animate__fadeInUp">Soutenir, Unir, Changer des vies.</p>
          <a href="about.html" class="btn btn-light btn-lg mt-4 animate__animated animate__zoomIn">En savoir plus</a>
        </div>
      </header>
    
      <!-- Pr√©sentation rapide -->
      <section class="py-5 bg-light">
        <div class="container">
          <div class="row text-center">
            <div class="col-md-4 mb-4">
              <h3>üè† Aide aux sans-abris</h3>
              <p>Nous intervenons directement pour offrir nourriture, v√™tements et abri √† ceux qui en ont besoin.</p>
            </div>
            <div class="col-md-4 mb-4">
              <h3>‚öΩ √âquipes sportives</h3>
              <p>Nous utilisons le sport pour d√©velopper la solidarit√© et l‚Äôesprit d‚Äô√©quipe chez les jeunes.</p>
            </div>
            <div class="col-md-4 mb-4">
              <h3>üí° Programmes √©ducatifs</h3>
              <p>Formations, ateliers, et soutien scolaire pour favoriser la r√©insertion sociale.</p>
            </div>
          </div>
        </div>
      </section>
    
      <!-- Section T√©moignages -->
      <section class="py-5 bg-white">
        <div class="container">
          <h2 class="text-center mb-5">üí¨ T√©moignages</h2>
          <div class="row">
            <div class="col-md-4 mb-4">
              <div class="card shadow animate__animated animate__fadeInUp">
                <div class="card-body">
                  <p class="card-text">‚ÄúGr√¢ce √† TOKONTANY BE MALAGASY, j‚Äôai pu retrouver un emploi et une vie stable.‚Äù</p>
                  <h5 class="card-title mt-3">‚Äî Jean, Antananarivo</h5>
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="card shadow animate__animated animate__fadeInUp animate__delay-1s">
                <div class="card-body">
                  <p class="card-text">‚ÄúLes ateliers √©ducatifs ont compl√®tement chang√© la vision de mon avenir.‚Äù</p>
                  <h5 class="card-title mt-3">‚Äî Aina, Fianarantsoa</h5>
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="card shadow animate__animated animate__fadeInUp animate__delay-2s">
                <div class="card-body">
                  <p class="card-text">‚ÄúJe n‚Äôaurais jamais pens√© que le sport pouvait m‚Äôapporter autant d‚Äôespoir.‚Äù</p>
                  <h5 class="card-title mt-3">‚Äî Solofo, Tamatave</h5>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
      <!-- Section Partenaires -->
      <section class="py-5 bg-light">
        <div class="container text-center">
          <h2 class="mb-5">ü§ù Nos Partenaires</h2>
          <div class="row">
            <div class="col-md-4 mb-4">
              <div class="card shadow-lg h-100">
                <div class="card-body">
                  <h5 class="card-title">Partenaire 1</h5>
                  <p class="card-text">Un acteur cl√© dans le domaine de l‚Äôaide humanitaire, notre partenaire s'engage activement √† am√©liorer les conditions de vie des plus vuln√©rables.</p>
                  <a href="#" class="btn btn-primary mt-3">En savoir plus</a>
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="card shadow-lg h-100">
                <div class="card-body">
                  <h5 class="card-title">Partenaire 2</h5>
                  <p class="card-text">Nous travaillons main dans la main avec ce partenaire pour offrir des solutions de logement abordables et durables pour les familles n√©cessiteuses.</p>
                  <a href="#" class="btn btn-primary mt-3">En savoir plus</a>
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="card shadow-lg h-100">
                <div class="card-body">
                  <h5 class="card-title">Partenaire 3</h5>
                  <p class="card-text">Avec ce partenaire, nous organisons des programmes √©ducatifs pour aider les jeunes √† acc√©der √† une √©ducation de qualit√© et √† des opportunit√©s de d√©veloppement personnel.</p>
                  <a href="#" class="btn btn-primary mt-3">En savoir plus</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    

  <!-- Footer -->
  <footer class="bg-dark text-white text-center pt-5 pb-4">
    <div class="container">
      <div class="row mb-4">
        <div class="col-md-3 mb-4">
          <h5>Liens rapides</h5>
          <ul class="list-unstyled">
            <li><a href="index.html" class="text-white">Accueil</a></li>
            <li><a href="about.html" class="text-white">√Ä propos</a></li>
            <li><a href="activities.html" class="text-white">Activit√©s</a></li>
            <li><a href="programs.html" class="text-white">Programmes</a></li>
          </ul>
        </div>
        <div class="col-md-3 mb-4">
          <h5>Nos services</h5>
          <ul class="list-unstyled">
            <li><a href="#" class="text-white">Aide aux sans-abris</a></li>
            <li><a href="#" class="text-white">√âquipes sportives</a></li>
            <li><a href="#" class="text-white">Programmes √©ducatifs</a></li>
          </ul>
        </div>
        <div class="col-md-3 mb-4">
          <h5>Suivez-nous</h5>
          <ul class="list-unstyled">
            <li><a href="https://www.facebook.com/profile.php?id=61567949001928" class="text-white"><i class="fab fa-facebook-f"></i> Facebook</a></li>
            <li><a href="https://wa.me/261345045624" class="text-white"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>
          </ul>
        </div>
        <div class="col-md-3 mb-4">
          <h5>Contactez-nous</h5>
          <p><i class="fas fa-map-marker-alt"></i> Antananarivo, Madagascar</p>
          <p><i class="fas fa-phone"></i> +261 34 50 456 24</p>
          <p><i class="fas fa-envelope"></i> info@tokontanybe.mg</p>
        </div>
      </div>
      <div class="row justify-content-center mb-4">
        <div class="col-md-6">
          <h5>Abonnez-vous √† tokontany be Malagasy </h5>
          <form id="newsletter-form">
            <div class="input-group">
              <input type="email" id="newsletter-email" class="form-control" placeholder="Votre adresse e-mail" required>
              <button class="btn btn-primary" type="submit">S'abonner</button>
            </div>
          </form>
          <div id="newsletter-message" class="mt-2 text-success"></div>
        </div>
      </div>
      <p class="mb-0">&copy; 2025 TOKONTANY BE MALAGASY - by Princy Rajaonarison.</p>
    </div>
  </footer>

<!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAO-ZOlRKJRj319BAdbJM1DAInBEEWJsOg",
      authDomain: "tokontany-followers.firebaseapp.com",
      databaseURL: "https://tokontany-followers-default-rtdb.firebaseio.com",
      projectId: "tokontany-followers",
      storageBucket: "tokontany-followers.firebasestorage.app",
      messagingSenderId: "98131171089",
      appId: "1:98131171089:web:57a07bf410939e32081eb0"
    };
  
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  
    // Compteur d'abonn√©s
    const countRef = database.ref("followers/count");
    countRef.on("value", snapshot => {
      const count = snapshot.val() || 0;
      document.getElementById("follower-count").textContent = `${count} abonn√©s`;
    });
  
    function isValidEmail(email) {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return regex.test(email);
    }

        async function validateEmailWithAPI(email) {
        const apiKey = "5cbb20446ada452f990c857cd3e768b6"; // Remplace par ta vraie cl√© API
        const url = `https://emailvalidation.abstractapi.com/v1/?api_key=${apiKey}&email=${email}`;

        try {
            const response = await fetch(url);
            const data = await response.json();

            return data.is_valid_format.value &&
                !data.is_disposable_email.value &&
                data.is_smtp_valid.value;
        } catch (error) {
            console.error("Erreur de validation API :", error);
            return false;
        }
        }

  
    const form = document.getElementById("newsletter-form");
    
    form.addEventListener("submit", async function(e) {
    e.preventDefault();

    const emailInput = document.getElementById("newsletter-email");
    const email = emailInput.value.trim().toLowerCase();
    const messageDiv = document.getElementById("newsletter-message");

    if (!isValidEmail(email)) {
        messageDiv.textContent = "Format d'adresse email invalide.";
        messageDiv.classList.remove("text-success");
        messageDiv.classList.add("text-danger");
        return;
    }

    const isValid = await validateEmailWithAPI(email);
    if (!isValid) {
        messageDiv.textContent = "Adresse email invalide ou jetable.";
        messageDiv.classList.remove("text-success");
        messageDiv.classList.add("text-danger");
        return;
    }

    const emailsRef = database.ref("followers/emails");

    const now = new Date();
    const formattedDate = now.toLocaleDateString("fr-FR", {
    day: "2-digit",
    month: "2-digit",
    year: "numeric",
    });

    const date = new Date().toLocaleString();
    firebase.database().ref("followers/emails").push({
    email: email,
    date: date
    });


    emailsRef.once("value", snapshot => {
        const emails = snapshot.val() || {};
        const emailExists = Object.values(emails).includes(email);

        if (emailExists) {
        messageDiv.textContent = "Vous √™tes d√©j√† abonn√©.";
        messageDiv.classList.remove("text-success");
        messageDiv.classList.add("text-warning");
        } else {
        emailsRef.push(email)
            .then(() => {
            countRef.transaction(current => (current || 0) + 1);
            messageDiv.textContent = "Merci pour votre abonnement !";
            messageDiv.classList.remove("text-danger", "text-warning");
            messageDiv.classList.add("text-success");
            emailInput.value = "";
            })
            .catch((error) => {
            console.error("Erreur lors de l'ajout :", error);
            messageDiv.textContent = "Erreur lors de l'abonnement.";
            messageDiv.classList.add("text-danger");
            });
        }
    });
    });

  </script>
  
  
  <!-- Bootstrap Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
